(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{C4c6:function(a,t,e){"use strict";var n=e("LvDl"),s=e.n(n),r=e("oVt+"),o=e("sove"),l=e("R5cT"),i=e("KaE5"),d=e("AeMN"),u=e("JtJI"),c=e("mwM1"),p=e("Ki4g"),m=e("bPaI"),h=e("GUe+"),g=e("Snq/"),b=e.n(g),f={components:{BRow:r.a,BCol:o.a,BFormInput:l.a,BTable:i.a,BSpinner:d.a,BPagination:u.a,BOverlay:c.a,BTr:p.a,BTh:m.a,BButton:h.a,vSelect:b.a},props:{items:{type:Array,required:!0},fields:{type:Array,required:!0},meta:{required:!0},isBusy:{type:Boolean,default:function(){return!0}},isAsesor:{type:Boolean,default:function(){return!1}}},data:function(){return{loading:!1,loading_modal:!1,sortBy:null,sortDesc:!1}},watch:{sortBy:function(a){this.$emit("sort",{sortBy:this.sortBy,sortDesc:this.sortDesc})},sortDesc:function(a){this.$emit("sort",{sortBy:this.sortBy,sortDesc:this.sortDesc})}},methods:{aksi:function(a,t){this.$emit("aksi",{aksi:t,item:a})},loadPerPage:function(a){this.$emit("per_page",this.meta.per_page)},changePage:function(a){this.$emit("pagination",a)},search:s.a.debounce((function(a){this.$emit("search",a)}),500),changeBulan:function(a){this.$emit("bulan",a)},changeTanggal:function(a){this.$emit("tanggal",a)}}},w=e("KHd+"),_=Object(w.a)(f,(function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",[e("b-row",["guru"===a.meta.isData?[e("b-col",{staticClass:"mb-2",attrs:{md:"4"}},[e("v-select",{attrs:{options:[10,25,50,100],clearable:!1,searchable:!1},on:{input:a.loadPerPage},model:{value:a.meta.per_page,callback:function(t){a.$set(a.meta,"per_page",t)},expression:"meta.per_page"}})],1),a._v(" "),e("b-col",{attrs:{md:"4"}},[e("v-select",{attrs:{reduce:function(a){return a.angka},label:"huruf",options:a.meta.data_bulan,placeholder:"== Filter Bulan =="},on:{input:a.changeBulan},scopedSlots:a._u([{key:"no-options",fn:function(t){t.search,t.searching,t.loading;return[a._v("\n            Tidak ada data untuk ditampilkan\n          ")]}}],null,!1,3690207903),model:{value:a.meta.bulan,callback:function(t){a.$set(a.meta,"bulan",t)},expression:"meta.bulan"}})],1),a._v(" "),e("b-col",{attrs:{md:"4"}},[e("b-form-input",{attrs:{placeholder:"Cari data..."},on:{input:a.search}})],1)]:[e("b-col",{staticClass:"mb-2",attrs:{md:"6"}},[e("v-select",{attrs:{reduce:function(a){return a.angka},label:"huruf",options:a.meta.data_bulan,placeholder:"== Filter Bulan =="},on:{input:a.changeBulan},scopedSlots:a._u([{key:"no-options",fn:function(t){t.search,t.searching,t.loading;return[a._v("\n            Tidak ada data untuk ditampilkan\n          ")]}}]),model:{value:a.meta.bulan,callback:function(t){a.$set(a.meta,"bulan",t)},expression:"meta.bulan"}})],1),a._v(" "),e("b-col",{attrs:{md:"6"}},[e("v-select",{attrs:{options:a.meta.data_tanggal,placeholder:"== Filter Tanggal =="},on:{input:a.changeTanggal},scopedSlots:a._u([{key:"no-options",fn:function(t){t.search,t.searching,t.loading;return[a._v("\n            Tidak ada data untuk ditampilkan\n          ")]}}]),model:{value:a.meta.tanggal,callback:function(t){a.$set(a.meta,"tanggal",t)},expression:"meta.tanggal"}})],1),a._v(" "),e("b-col",{staticClass:"mb-2",attrs:{md:"6"}},[e("v-select",{attrs:{options:[10,25,50,100],clearable:!1,searchable:!1},on:{input:a.loadPerPage},model:{value:a.meta.per_page,callback:function(t){a.$set(a.meta,"per_page",t)},expression:"meta.per_page"}})],1),a._v(" "),e("b-col",{attrs:{md:"6"}},[e("b-form-input",{attrs:{placeholder:"Cari data..."},on:{input:a.search}})],1)]],2),a._v(" "),e("b-overlay",{attrs:{show:a.loading,rounded:"",opacity:"0.6",size:"lg","spinner-variant":"warning"}},[e("b-table",{attrs:{bordered:"",striped:"",items:a.items,fields:a.fields,"sort-by":a.sortBy,"sort-desc":a.sortDesc,"show-empty":"",busy:a.isBusy},on:{"update:sortBy":function(t){a.sortBy=t},"update:sort-by":function(t){a.sortBy=t},"update:sortDesc":function(t){a.sortDesc=t},"update:sort-desc":function(t){a.sortDesc=t}},scopedSlots:a._u(["guru"===a.meta.isData?{key:"thead-top",fn:function(t){return[e("b-tr",[e("b-th",{attrs:{colspan:"2"}},[e("span",{staticClass:"sr-only"},[a._v("Nama dan NIP")])]),a._v(" "),e("b-th",{staticClass:"text-center",attrs:{colspan:"5"}},[a._v("Jumlah Absensi")])],1)]}}:null,{key:"empty",fn:function(t){return[e("p",{staticClass:"text-center"},[a._v("Tidak ada data untuk ditampilkan")])]}},{key:"table-busy",fn:function(){return[e("div",{staticClass:"text-center text-danger my-2"},[e("b-spinner",{staticClass:"align-middle"}),a._v(" "),e("strong",[a._v("Loading...")])],1)]},proxy:!0},{key:"cell(h)",fn:function(t){return[a._v("\n        "+a._s(t.item.H)+"\n      ")]}},{key:"cell(a)",fn:function(t){return[a._v("\n        "+a._s(t.item.A)+"\n      ")]}},{key:"cell(s)",fn:function(t){return[a._v("\n        "+a._s(t.item.S)+"\n      ")]}},{key:"cell(i)",fn:function(t){return[a._v("\n        "+a._s(t.item.I)+"\n      ")]}},{key:"cell(d)",fn:function(t){return[a._v("\n        "+a._s(t.item.D)+"\n      ")]}},{key:"cell(wali_kelas)",fn:function(t){return[a._v("\n        "+a._s(t.item.wali_kelas.nama)+"\n      ")]}},{key:"cell(actions)",fn:function(t){return[e("b-button",{attrs:{size:"sm",variant:"primary"},on:{click:function(e){return a.aksi(t.item,"detil")}}},[a._v("Detil")])]}}],null,!0)})],1),a._v(" "),e("b-row",{staticClass:"mt-2"},[e("b-col",{attrs:{md:"6"}},[e("p",[a._v("Menampilkan "+a._s(a.meta.from?a.meta.from:0)+" sampai "+a._s(a.meta.to)+" dari "+a._s(a.meta.total)+" entri")])]),a._v(" "),e("b-col",{attrs:{md:"6"}},[e("b-pagination",{attrs:{"total-rows":a.meta.total,"per-page":a.meta.per_page,align:"right","aria-controls":"dw-datatable"},on:{change:a.changePage},model:{value:a.meta.current_page,callback:function(t){a.$set(a.meta,"current_page",t)},expression:"meta.current_page"}})],1)],1)],1)}),[],!1,null,null,null);t.a=_.exports},Yj7j:function(a,t,e){var n=e("fBKd");"string"==typeof n&&(n=[[a.i,n,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};e("aET+")(n,s);n.locals&&(a.exports=n.locals)},dYKr:function(a,t,e){"use strict";e("Yj7j")},fBKd:function(a,t,e){var n=e("JPst"),s=e("nm7J");(t=n(!1)).i(s),t.push([a.i,"[dir] .swal2-container .swal2-popup {\n  border-radius: 0.428rem;\n  padding-bottom: 1.5rem;\n}\n.swal2-container .swal2-popup .swal2-close:focus {\n  outline: none;\n}\n[dir] .swal2-container .swal2-popup .swal2-close:focus {\n  box-shadow: none;\n}\n.swal2-container .swal2-popup .swal2-content {\n  color: #6e6b7b;\n}\n.swal2-container .swal2-popup .swal2-title {\n  font-size: 1.5rem;\n  font-weight: inherit;\n  color: #5e5873;\n}\n[dir] .swal2-container .swal2-popup button.swal2-confirm:focus {\n  box-shadow: none;\n}\n.swal2-container .swal2-popup input.swal2-input {\n  height: 2.714rem;\n  font-size: 1rem;\n  color: #6e6b7b;\n  line-height: 1.45;\n}\n[dir] .swal2-container .swal2-popup input.swal2-input {\n  padding: 0.438rem 1rem;\n  border-color: #d8d6de;\n  border-radius: 0.357rem;\n}\n[dir] .swal2-container .swal2-popup input.swal2-input:focus {\n  border-color: #7367f0 !important;\n  box-shadow: 0 3px 10px 0 rgba(34, 41, 47, 0.1);\n}\n[dir] .swal2-container .swal2-popup .swal2-progress-steps .swal2-progress-step {\n  background-color: #7367f0;\n}\n[dir] .swal2-container .swal2-popup .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step ~ .swal2-progress-step-line, [dir] .swal2-container .swal2-popup .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step ~ .swal2-progress-step {\n  background-color: #b3adf7;\n}\n[dir] .swal2-container .swal2-popup .swal2-progress-steps .swal2-progress-step-line {\n  background-color: #7367f0;\n}\n.swal2-container .swal2-popup pre {\n  min-height: 1.35rem;\n}\n[dir] .swal2-container .swal2-popup pre {\n  margin-top: 0.5rem;\n}\n.swal2-container .swal2-popup .swal2-footer {\n  color: #6e6b7b;\n}\n[dir] .swal2-container .swal2-popup .swal2-footer {\n  border-color: #ebe9f1;\n}\n.dark-layout .swal2-container .swal2-popup .swal2-title {\n  color: #d0d2d6;\n}\n[dir] .dark-layout .swal2-container .swal2-modal {\n  background-color: #283046;\n}\n.dark-layout .swal2-container .swal2-modal .swal2-header .swal2-title {\n  color: #d0d2d6;\n}\n.dark-layout .swal2-container .swal2-modal .swal2-header .swal2-icon-text {\n  color: inherit;\n}\n[dir] .dark-layout .swal2-container .swal2-modal .swal2-header .swal2-success-circular-line-left, [dir] .dark-layout .swal2-container .swal2-modal .swal2-header .swal2-success-circular-line-right, [dir] .dark-layout .swal2-container .swal2-modal .swal2-header .swal2-success-fix, [dir] .dark-layout .swal2-container .swal2-modal .swal2-header .swal2-animate-success-icon {\n  background-color: #283046 !important;\n}\n.dark-layout .swal2-container .swal2-modal input.swal2-input {\n  color: #b4b7bd;\n}\n[dir] .dark-layout .swal2-container .swal2-modal input.swal2-input {\n  border-color: #3b4253;\n}\n.dark-layout .swal2-container .swal2-modal .swal2-content, .dark-layout .swal2-container .swal2-modal .swal2-html-container {\n  color: #b4b7bd;\n}\n.dark-layout .swal2-container .swal2-modal pre, .dark-layout .swal2-container .swal2-modal code {\n  color: #b4b7bd;\n}\n[dir] .dark-layout .swal2-container .swal2-modal .swal2-input {\n  background-color: #283046;\n}\n.dark-layout .swal2-container .swal2-modal .swal2-footer {\n  color: #b4b7bd;\n}\n[dir] .dark-layout .swal2-container .swal2-modal .swal2-footer {\n  border-color: #3b4253;\n}\n.dark-layout .swal2-container .swal2-validation-message {\n  color: #b4b7bd;\n}\n[dir] .dark-layout .swal2-container .swal2-validation-message {\n  background-color: #161d31;\n}\nhtml[dir=rtl] .swal2-rtl .swal2-close {\n  left: 0;\n  right: auto;\n}\n.modal-fullscreen .modal-dialog {\n  max-width: 100%;\n  top: 0;\n  bottom: 0;\n  height: 100vh;\n  display: flex;\n  position: fixed;\n  z-index: 100000;\n}\n[dir] .modal-fullscreen .modal-dialog {\n  margin: 0;\n}\n[dir=ltr] .modal-fullscreen .modal-dialog {\n  left: 0;\n  right: 0;\n}\n[dir=rtl] .modal-fullscreen .modal-dialog {\n  right: 0;\n  left: 0;\n}",""]),a.exports=t},m10P:function(a,t,e){"use strict";var n=e("XuX8"),s=new(e.n(n).a);t.a=s},oVuX:function(a,t,e){"use strict";var n=e("I+eb"),s=e("4zBA"),r=e("RK3t"),o=e("/GqU"),l=e("pkCn"),i=s([].join);n({target:"Array",proto:!0,forced:r!=Object||!l("join",",")},{join:function(a){return i(o(this),void 0===a?",":a)}})},xnHP:function(a,t,e){"use strict";e.r(t);e("rB9j"),e("hByQ");var n=e("IF94"),s=e("YZfj"),r=e("AeMN"),o=e("C4c6"),l=(e("07d7"),e("FZtP"),e("TeQF"),e("oVuX"),e("mwM1")),i=e("Ed67"),d=e("Hrou"),u=e("C9gC"),c=e("bPaI"),p=e("okd0"),m=e("Ki4g"),h=e("CAmi"),g=e("GUe+"),b=e("g2Gq"),f=e("m10P"),w={components:{BOverlay:l.a,BForm:i.a,BTableSimple:d.a,BThead:u.a,BTh:c.a,BTbody:p.a,BTr:m.a,BTd:h.a,BButton:g.a,BFormSelect:b.a},data:function(){return{addModalShow:!1,loading_form:!1,absensi:{},hari:"",jumlah_jam:0,data_guru:[]}},created:function(){f.a.$on("open-modal-presensi-guru",this.handleEvent)},methods:{handleEvent:function(){var a=this;this.$http.get("/presensi/get_hari").then((function(t){var e=t.data;a.hari=e.tanggal,a.jumlah_jam=e.jumlah_jam,a.getGuru()}))},getGuru:function(){var a=this;this.$http.get("/referensi/get-guru",{params:{aksi:"absen"}}).then((function(t){var e=t.data;a.data_guru=e.data;var n=a;a.data_guru.forEach((function(a){for(var t=1;t<n.jumlah_jam+1;t++)n.absensi[a.guru_id+"#"+t]=n.getAbsen(a.presensi,t)[0]?n.getAbsen(a.presensi,t)[0].absen:"H"})),a.addModalShow=!0}))},getAbsen:function(a,t){return a.filter((function(a){return a.jam===t}))},hideModal:function(){this.addModalShow=!1,this.resetForm()},resetForm:function(){this.file1=null},onFileChange:function(a){this.file1=a.target.files[0]},handleOk:function(a){a.preventDefault(),this.handleSubmit()},handleSubmit:function(){var a=this;this.loading_form=!0,this.$http.post("/presensi/simpan",{aksi:"guru",absensi:this.absensi}).then((function(t){a.loading_form=!1;var e=t.data;console.log(e),e.errors?(a.feedback_file=e.errors.file?e.errors.file.join(", "):"",a.state_file=!e.errors.file&&null):a.$swal({icon:e.icon,title:e.title,html:e.text,customClass:{confirmButton:"btn btn-success"}}).then((function(t){a.hideModal(),a.$emit("reload")}))})).catch((function(a){console.log(a)}))}}},_=(e("dYKr"),e("KHd+")),v=Object(_.a)(w,(function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("b-modal",{attrs:{title:"Input Presensi Guru","modal-class":"modal-fullscreen",scrollable:""},on:{hidden:a.hideModal,ok:a.handleOk},scopedSlots:a._u([{key:"modal-footer",fn:function(t){var n=t.ok,s=t.cancel;return[e("b-overlay",{staticClass:"d-inline-block",attrs:{show:a.loading_form,rounded:"",opacity:"0.6","spinner-small":"","spinner-variant":"secondary"}},[e("b-button",{on:{click:function(a){return s()}}},[a._v("Tutup")])],1),a._v(" "),e("b-overlay",{staticClass:"d-inline-block",attrs:{show:a.loading_form,rounded:"",opacity:"0.6","spinner-small":"","spinner-variant":"success"}},[a.data_guru.length?e("b-button",{attrs:{variant:"success"},on:{click:function(a){return n()}}},[a._v("Simpan")]):a._e()],1)]}}]),model:{value:a.addModalShow,callback:function(t){a.addModalShow=t},expression:"addModalShow"}},[e("b-overlay",{attrs:{show:a.loading_form,rounded:"",opacity:"0.6",size:"lg","spinner-variant":"danger"}},[e("b-form",{ref:"form",on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),a.handleSubmit(t)}}},[e("BTableSimple",{attrs:{bordered:""}},[e("BThead",[e("BTr",[e("BTh",{staticStyle:{"vertical-align":"middle"},attrs:{rowspan:"2"}},[a._v("Nama Lengkap")]),a._v(" "),e("BTh",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"},attrs:{rowspan:"2"}},[a._v("NIP")]),a._v(" "),e("BTh",{staticClass:"text-center",attrs:{colspan:a.jumlah_jam}},[a._v("Absensi Jam Ke")])],1),a._v(" "),e("BTr",[a._l(a.jumlah_jam,(function(t){return[e("BTh",{staticClass:"text-center"},[a._v(a._s(t))])]}))],2)],1),a._v(" "),e("BTbody",[a.data_guru.length?[a._l(a.data_guru,(function(t){return[e("BTr",[e("BTd",[a._v(a._s(t.nama))]),a._v(" "),e("BTd",{staticClass:"text-center"},[a._v(a._s(t.nip))]),a._v(" "),a._l(a.jumlah_jam,(function(n){return[e("BTd",[e("b-form-select",{attrs:{options:["H","A","S","I","D"]},model:{value:a.absensi[t.guru_id+"#"+n],callback:function(e){a.$set(a.absensi,t.guru_id+"#"+n,e)},expression:"absensi[guru.guru_id+'#'+jam_ke]"}})],1)]}))],2)]}))]:[e("BTr",[e("BTd",{staticClass:"text-center",attrs:{colspan:a.jumlah_jam+2}},[a._v("Tidak ada guru yang memiliki jadwal mengajar hari ini, "+a._s(a.hari))])],1)]],2)],1)],1)],1)],1)}),[],!1,null,null,null).exports,y={components:{BCard:n.a,BCardBody:s.a,BSpinner:r.a,Datatable:o.a,AddModal:v},data:function(){return{isBusy:!0,fields:[{key:"nama",label:"Nama Lengkap",sortable:!1,thClass:"text-center"},{key:"nip",label:"NIP",sortable:!1,thClass:"text-center",tdClass:"text-center"},{key:"h",label:"h",sortable:!1,thClass:"text-center",tdClass:"text-center"},{key:"a",label:"a",sortable:!1,thClass:"text-center",tdClass:"text-center"},{key:"s",label:"s",sortable:!1,thClass:"text-center",tdClass:"text-center"},{key:"i",label:"i",sortable:!1,thClass:"text-center",tdClass:"text-center"},{key:"d",label:"d",sortable:!1,thClass:"text-center",tdClass:"text-center"}],items:[],meta:{},current_page:1,per_page:10,search:"",sortBy:"nama",sortByDesc:!1,data_bulan:[],bulan:""}},created:function(){f.a.$on("add-presensi-guru",this.handleEvent),this.loadPostsData()},methods:{handleEvent:function(){f.a.$emit("open-modal-presensi-guru")},handleReload:function(){this.loadPostsData()},loadPostsData:function(){var a=this;this.isBusy=!0;var t=this.current_page;this.$http.get("/presensi",{params:{guru_id:this.user.guru_id,peserta_didik_id:this.user.peserta_didik_id,semester_id:this.user.semester.semester_id,periode_aktif:this.user.semester.nama,tanggal_mulai:this.user.semester.tanggal_mulai,tanggal_selesai:this.user.semester.tanggal_selesai,page:t,per_page:this.per_page,q:this.search,sortby:this.sortBy,sortbydesc:this.sortByDesc?"DESC":"ASC",bulan:this.bulan,data:"guru"}}).then((function(t){var e=t.data.data;a.data_bulan=t.data.data_bulan,a.bulan=t.data.bulan,a.isBusy=!1,a.items=e.data,a.meta={isData:"guru",total:e.total,current_page:e.current_page,per_page:e.per_page,from:e.from,to:e.to,bulan:a.bulan,data_bulan:a.data_bulan}}))},handlePerPage:function(a){this.per_page=a,this.loadPostsData()},handlePagination:function(a){this.current_page=a,this.loadPostsData()},handleSearch:function(a){this.search=a,this.loadPostsData()},handleSort:function(a){a.sortBy&&(this.sortBy=a.sortBy,this.sortByDesc=a.sortDesc,this.loadPostsData())},handleBulan:function(a){this.bulan=a,this.loadPostsData()}}},k=Object(_.a)(y,(function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("b-card",{attrs:{"no-body":""}},[e("b-card-body",[a.isBusy?e("div",{staticClass:"text-center text-danger my-2"},[e("b-spinner",{staticClass:"align-middle"}),a._v(" "),e("strong",[a._v("Loading...")])],1):e("div",[e("datatable",{attrs:{isBusy:a.isBusy,items:a.items,fields:a.fields,meta:a.meta},on:{per_page:a.handlePerPage,pagination:a.handlePagination,search:a.handleSearch,sort:a.handleSort,bulan:a.handleBulan}})],1)]),a._v(" "),e("add-modal",{on:{reload:a.handleReload}})],1)}),[],!1,null,null,null);t.default=k.exports}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{"1OyB":function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return o}))},TeQF:function(e,t,n){"use strict";var o=n("I+eb"),r=n("tycR").filter;o({target:"Array",proto:!0,forced:!n("Hd5f")("filter")},{filter:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},XTZb:function(e,t,n){"use strict";var o=n("VTBJ"),r=n("1OyB"),s=n("vuIU"),i=n("rePB"),a=(n("ma9I"),n("07d7"),n("TeQF"),n("FNk8"),{loginEndpoint:"/jwt/login",registerEndpoint:"/jwt/register",refreshEndpoint:"/jwt/refresh-token",logoutEndpoint:"/jwt/logout",tokenType:"Bearer",storageTokenKeyName:"accessToken",storageRefreshTokenKeyName:"refreshToken"}),c=function(){function e(t,n){var s=this;Object(r.a)(this,e),Object(i.a)(this,"axiosIns",null),Object(i.a)(this,"jwtConfig",Object(o.a)({},a)),Object(i.a)(this,"isAlreadyFetchingAccessToken",!1),Object(i.a)(this,"subscribers",[]),this.axiosIns=t,this.jwtConfig=Object(o.a)(Object(o.a)({},this.jwtConfig),n),this.axiosIns.interceptors.request.use((function(e){var t=s.getToken();return t&&(e.headers.Authorization="".concat(s.jwtConfig.tokenType," ").concat(t)),e}),(function(e){return Promise.reject(e)})),this.axiosIns.interceptors.response.use((function(e){return e}),(function(e){var t=e.config,n=e.response,o=t;return n&&401===n.status?(s.isAlreadyFetchingAccessToken||(s.isAlreadyFetchingAccessToken=!0,s.refreshToken().then((function(e){s.isAlreadyFetchingAccessToken=!1,s.setToken(e.data.accessToken),s.setRefreshToken(e.data.refreshToken),s.onAccessTokenFetched(e.data.accessToken)}))),new Promise((function(e){s.addSubscriber((function(t){o.headers.Authorization="".concat(s.jwtConfig.tokenType," ").concat(t),e(s.axiosIns(o))}))}))):Promise.reject(e)}))}return Object(s.a)(e,[{key:"onAccessTokenFetched",value:function(e){this.subscribers=this.subscribers.filter((function(t){return t(e)}))}},{key:"addSubscriber",value:function(e){this.subscribers.push(e)}},{key:"getToken",value:function(){return localStorage.getItem(this.jwtConfig.storageTokenKeyName)}},{key:"getRefreshToken",value:function(){return localStorage.getItem(this.jwtConfig.storageRefreshTokenKeyName)}},{key:"setToken",value:function(e){localStorage.setItem(this.jwtConfig.storageTokenKeyName,e)}},{key:"setRefreshToken",value:function(e){localStorage.setItem(this.jwtConfig.storageRefreshTokenKeyName,e)}},{key:"login",value:function(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=this.axiosIns).post.apply(e,[this.jwtConfig.loginEndpoint].concat(n))}},{key:"register",value:function(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=this.axiosIns).post.apply(e,[this.jwtConfig.registerEndpoint].concat(n))}},{key:"refreshToken",value:function(){return this.axiosIns.post(this.jwtConfig.refreshEndpoint,{refreshToken:this.getRefreshToken()})}}]),e}();var u,f=n("duZo"),h=(u=f.a,{jwt:new c(u,{})}).jwt;t.a=h},lwmX:function(e,t,n){"use strict";n.r(t);n("FNk8");var o=n("WRyL"),r=n("XTZb"),s={methods:{logout:function(){localStorage.removeItem(r.a.jwtConfig.storageTokenKeyName),localStorage.removeItem(r.a.jwtConfig.storageRefreshTokenKeyName),localStorage.removeItem("semester_id"),localStorage.removeItem("userData"),this.$ability.update(o.a),this.$router.push({name:"auth-login"})}}},i=n("KHd+"),a=Object(i.a)(s,(function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v("\n  "+this._s(this.logout())+"\n")])}),[],!1,null,null,null);t.default=a.exports},vuIU:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n("o46R");function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Object(o.a)(r.key),r)}}function s(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}}}]);